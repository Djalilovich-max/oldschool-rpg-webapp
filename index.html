<!DOCTYPE html>

<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Aria RPG</title>
<style>
    body {
  margin: 0;
  padding: 0;
  background: url('ĞĞ¾Ğ²Ñ‹Ğ¹ Ñ‚Ğ¾Ñ‡ĞµÑ‡Ğ½Ñ‹Ğ¹ Ñ€Ğ¸ÑÑƒĞ½Ğ¾Ğº.bmp') no-repeat center center fixed;
  background-size: cover;
  font-family: sans-serif;
  color: white;
  height: 100vh;
}
    .left, .middle, .right {
      padding: 10px;
    }
    .player-interface {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px;
    }
    .hp-bar {
      width: 200px;
      height: 12px;
      background: #900;
      border: 1px solid #000;
      margin-bottom: 10px;
      position: relative;
    }
    .hp-bar .hp-fill {
      background: #0f0;
      height: 100%;
      width: 70%;
    }
    .main-layout {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 20px;
    }
    .left-panel, .right-panel {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      height: 260px;
    }
    .left-panel img, .right-panel img {
      width: 48px;
      height: 48px;
      border: 1px solid #caa;
      background: #222;
    }
    .left-panel img[alt="Ğ¡ĞµÑ€ÑŒĞ³Ğ¸"],
    .left-panel img[alt="ĞĞ¶ĞµÑ€ĞµĞ»ÑŒĞµ"],
    .rings img {
      width: 36px;
      height: 36px;
    }
    .rings {
      display: flex;
      gap: 4px;
    }
    .character-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }
    .character-wrapper img {
      width: 100px;
      height: auto;
    }
    .potions, .scrolls {
      display: flex;
      gap: 4px;
    }
    .potions img, .scrolls img {
      width: 28px;
      height: 28px;
    }
    .stats-panel {
      background: rgba(0,0,0,0.5);
      padding: 5px 8px;
      border: 1px solid #555;
      border-radius: 4px;
      font-size: 13px;
      line-height: 1.4;
      text-align: left;
      margin-top: 10px;
      max-height: 300px;
      overflow-y: auto;
    }
    .stats-panel p {
      margin: 4px 0;
    }
    .stats-panel hr {
      border: none;
      border-top: 1px solid #666;
      margin: 6px 0;
    }
    .middle {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .battle-area {
      background-color: rgba(0, 0, 0, 0.6);
      border: 1px solid #444;
      border-radius: 10px;
      padding: 15px;
      height: 240px;
      text-align: center;
      font-size: 18px;
    }
    .system-log {
      background-color: rgba(10, 10, 10, 0.7);
      border: 1px solid #222;
      border-radius: 10px;
      padding: 10px;
      font-size: 14px;
      overflow-y: auto;
      margin-top: 10px;
    }
    .right {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .block {
      background-color: rgba(0,0,0,0.5);
      padding: 8px;
      border: 1px solid #555;
      border-radius: 5px;
    }
      .lower-block {
      display: flex;
      gap: 10px;
      align-items: flex-start;
      margin-top: 10px;
    }
    #interface-wrapper {
      display: grid;
      grid-template-columns: 1fr 2fr 1fr;
      grid-template-rows: auto 1fr auto;
      gap: 10px;
      height: 100vh;
    }
</style>
</head>
<body>
<div id="interface-wrapper">
<section class="left player-interface" id="player">
<h1>[ĞĞ¸Ğº]</h1>
<div class="hp-bar"><div class="hp-fill"></div></div>
<div class="main-layout">
<div class="left-panel" data-section="equipment" id="player-equipment">
<img alt="Ğ¡ĞµÑ€ÑŒĞ³Ğ¸" src="Data/Images/img_item/e-09.gif"/>
<img alt="ĞĞ¶ĞµÑ€ĞµĞ»ÑŒĞµ" src="Data/Images/img_item/e-10.gif"/>
<img alt="ĞÑ€ÑƒĞ¶Ğ¸Ğµ" src="Data/Images/img_item/e-11.gif"/>
<img alt="Ğ‘Ñ€Ğ¾Ğ½Ñ" src="Data/Images/img_item/e-12.gif"/>
<div class="rings">
<img alt="ĞšĞ¾Ğ»ÑŒÑ†Ğ¾ 1" src="Data/Images/img_item/e-13.gif"/>
<img alt="ĞšĞ¾Ğ»ÑŒÑ†Ğ¾ 2" src="Data/Images/img_item/e-14.gif"/>
<img alt="ĞšĞ¾Ğ»ÑŒÑ†Ğ¾ 3" src="Data/Images/img_item/e-15.gif"/>
</div>
</div>
<div class="character-wrapper" data-section="skin" id="player-skin">
<img alt="Ğ¡ĞºĞ¸Ğ½" src="Data/Images/newobraz/m-001.gif"/>
<div class="potions">
<img src="Data/Images/img_item/e-02.gif"/>
<img src="Data/Images/img_item/e-03.gif"/>
<img src="Data/Images/img_item/e-04.gif"/>
</div>
<div class="scrolls">
<img src="Data/Images/img_item/e-06.gif"/>
<img src="Data/Images/img_item/e-07.gif"/>
<img src="Data/Images/img_item/e-08.gif"/>
</div>
</div>
<div class="lower-block">
<div class="right-panel" data-section="defense" id="player-defense">
<img alt="Ğ¨Ğ»ĞµĞ¼" src="Data/Images/img_item/e-16.gif"/>
<img alt="Ğ©Ğ¸Ñ‚" src="Data/Images/img_item/e-17.gif"/>
<img alt="ĞŸĞµÑ€Ñ‡Ğ°Ñ‚ĞºĞ¸" src="Data/Images/img_item/e-18.gif"/>
<img alt="Ğ‘Ğ¾Ñ‚Ğ¸Ğ½ĞºĞ¸" src="Data/Images/img_item/e-19.gif"/>
</div>
<div class="stats-panel" data-section="stats" id="player-stats">
<p><strong>ğŸ§¬ Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ:</strong></p>
<p><strong>ğŸ† ĞŸĞ¾Ğ±ĞµĞ´Ñ‹:</strong></p>
<p><strong>ğŸ’€ ĞŸĞ¾Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ:</strong></p>
<p><strong>âš–ï¸ ĞĞ¸Ñ‡ÑŒĞ¸:</strong></p>
<hr/>
<p><strong>ğŸ’ª Ğ¡Ğ¸Ğ»Ğ°:</strong></p>
<p><strong>ğŸ¤¸ Ğ›Ğ¾Ğ²ĞºĞ¾ÑÑ‚ÑŒ:</strong></p>
<p><strong>ğŸ§  Ğ˜Ğ½Ñ‚ÑƒĞ¸Ñ†Ğ¸Ñ:</strong></p>
<p><strong>â¤ï¸ Ğ’Ñ‹Ğ½Ğ¾ÑĞ»Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ:</strong></p>
<hr/>
<p><strong>ğŸ›¡ï¸ Ğ‘Ñ€Ğ¾Ğ½Ñ:</strong></p>
<hr/>
<p><strong>âš”ï¸ Ğ’Ğ»Ğ°Ğ´ĞµĞ½Ğ¸Ğµ Ğ¾Ñ€ÑƒĞ¶Ğ¸ĞµĞ¼:</strong></p>
<hr/>
<p><strong>ğŸ› ï¸ Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:</strong></p>
</div>
</div>
</div></section>
<section class="middle" id="arena" style="grid-column: 2;">
<div class="battle-area" data-section="arena" id="battle-area"></div>
<div class="system-log" data-section="log" id="battle-log"></div>
</section>
<aside class="right" id="side-panel" style="grid-column: 3; grid-row: 1 / span 2;">
<div class="block" data-section="map" id="map">
<strong>ĞšĞ°Ñ€Ñ‚Ğ°:</strong>
</div>
<div class="block" data-section="players" id="location-users">
<strong>Ğ˜Ğ³Ñ€Ğ¾ĞºĞ¸ Ğ² Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸:</strong>
</div>
<div class="block" data-section="chat" id="chat">
<strong>Ğ§Ğ°Ñ‚:</strong>
<input placeholder="Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ..." type="text"/>
</div>
</aside>
</div>

<script>
window.addEventListener("DOMContentLoaded", function () {
  const tg = window.Telegram.WebApp;
  const initData = tg.initDataUnsafe;

  if (!initData || !initData.user) {
    console.log("Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Telegram Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ñ‹");
    return;
  }

  const userId = initData.user.id;
  const username = initData.user.username || initData.user.first_name;
  document.querySelector("h1").innerText = `[${username}]`;

  fetch("Player_Profile.json")
    .then(res => res.json())
    .then(data => {
      const player = data.find(p => p.telegram_id === userId);
      if (!player) return;

      const stats = player.stats;

      const statLines = document.querySelectorAll("#player-stats p");
      if (statLines.length > 0) statLines[0].innerHTML = `<strong>ğŸ§¬ Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ:</strong> ${stats.level}`;
      if (statLines.length > 1) statLines[1].innerHTML = `<strong>ğŸ† ĞŸĞ¾Ğ±ĞµĞ´Ñ‹:</strong> ${stats.wins}`;
      if (statLines.length > 2) statLines[2].innerHTML = `<strong>ğŸ’€ ĞŸĞ¾Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ:</strong> ${stats.losses}`;
      if (statLines.length > 3) statLines[3].innerHTML = `<strong>âš–ï¸ ĞĞ¸Ñ‡ÑŒĞ¸:</strong> ${stats.draws}`;
      if (statLines.length > 5) statLines[5].innerHTML = `<strong>ğŸ’ª Ğ¡Ğ¸Ğ»Ğ°:</strong> ${stats.strength}`;
      if (statLines.length > 6) statLines[6].innerHTML = `<strong>ğŸ¤¸ Ğ›Ğ¾Ğ²ĞºĞ¾ÑÑ‚ÑŒ:</strong> ${stats.agility}`;
      if (statLines.length > 7) statLines[7].innerHTML = `<strong>ğŸ§  Ğ˜Ğ½Ñ‚ÑƒĞ¸Ñ†Ğ¸Ñ:</strong> ${stats.intuition}`;
      if (statLines.length > 8) statLines[8].innerHTML = `<strong>â¤ï¸ Ğ’Ñ‹Ğ½Ğ¾ÑĞ»Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ:</strong> ${stats.endurance}`;
      
      statLines.forEach(line => {
        if (line.innerHTML.includes("ğŸ›¡ï¸ Ğ‘Ñ€Ğ¾Ğ½Ñ:")) {
          line.innerHTML = `<strong>ğŸ›¡ï¸ Ğ‘Ñ€Ğ¾Ğ½Ñ:</strong><br />ğŸª– Ğ“Ğ¾Ğ»Ğ¾Ğ²Ñ‹: ${stats.armor.head}<br />ğŸ‘• Ğ¢ĞµĞ»Ğ°: ${stats.armor.body}<br />ğŸ¥¾ ĞĞ¾Ğ³: ${stats.armor.legs}`;
        }
        if (line.innerHTML.includes("âš”ï¸ Ğ’Ğ»Ğ°Ğ´ĞµĞ½Ğ¸Ğµ Ğ¾Ñ€ÑƒĞ¶Ğ¸ĞµĞ¼:")) {
          line.innerHTML = `<strong>âš”ï¸ Ğ’Ğ»Ğ°Ğ´ĞµĞ½Ğ¸Ğµ Ğ¾Ñ€ÑƒĞ¶Ğ¸ĞµĞ¼:</strong><br />ğŸ—¡ï¸ ĞœĞµÑ‡Ğ¸: ${stats.weapon_skills.swords}%<br />ğŸ”¨ Ğ”ÑƒĞ±Ğ¸Ğ½Ñ‹ Ğ¸ Ğ±ÑƒĞ»Ğ°Ğ²Ñ‹: ${stats.weapon_skills.maces}%<br />ğŸª“ Ğ¢Ğ¾Ğ¿Ğ¾Ñ€Ñ‹: ${stats.weapon_skills.axes}%<br />ğŸ—¡ï¸ ĞšĞ¸Ğ½Ğ¶Ğ°Ğ»Ñ‹: ${stats.weapon_skills.daggers}%`;
        }
        if (line.innerHTML.includes("ğŸ› ï¸ Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:")) {
          line.innerHTML = `<strong>ğŸ› ï¸ Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:</strong><br />
          â›ï¸ Ğ ÑƒĞ´Ğ¾ĞºĞ¾Ğ¿: ${stats.specializations.miner}%<br />
          ğŸ£ Ğ Ñ‹Ğ±Ğ°Ğº: ${stats.specializations.fisher}%<br />
          ğŸªµ ĞŸĞ»Ğ¾Ñ‚Ğ½Ğ¸Ğº: ${stats.specializations.carpenter}%<br />
          âš—ï¸ ĞĞ»Ñ…Ğ¸Ğ¼Ğ¸Ğº: ${stats.specializations.alchemist}%<br />
          ğŸŒ¾ Ğ¤ĞµÑ€Ğ¼ĞµÑ€: ${stats.specializations.farmer}%<br />
          ğŸŒ² Ğ›ĞµÑĞ¾Ñ€ÑƒĞ±: ${stats.specializations.lumberjack}%<br />
          ğŸ³ ĞŸĞ¾Ğ²Ğ°Ñ€: ${stats.specializations.cook}%<br />
          ğŸ’Š Ğ›ĞµĞºĞ°Ñ€ÑŒ: ${stats.specializations.healer}%`;
        }
      });
    });
});
</script>
</body>
</html>
