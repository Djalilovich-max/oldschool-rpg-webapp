<!DOCTYPE html>

<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Aria RPG</title>
<style>
    body {
  margin: 0;
  padding: 0;
  background: url('Новый точечный рисунок.bmp') no-repeat center center fixed;
  background-size: cover;
  font-family: sans-serif;
  color: white;
  height: 100vh;
}
    .left, .middle, .right {
      padding: 10px;
    }
    .player-interface {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px;
    }
    .hp-bar {
      width: 200px;
      height: 12px;
      background: #900;
      border: 1px solid #000;
      margin-bottom: 10px;
      position: relative;
    }
    .hp-bar .hp-fill {
      background: #0f0;
      height: 100%;
      width: 70%;
    }
    .main-layout {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 20px;
    }
    .left-panel, .right-panel {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      height: 260px;
    }
    .left-panel img, .right-panel img {
      width: 48px;
      height: 48px;
      border: 1px solid #caa;
      background: #222;
    }
    .left-panel img[alt="Серьги"],
    .left-panel img[alt="Ожерелье"],
    .rings img {
      width: 36px;
      height: 36px;
    }
    .rings {
      display: flex;
      gap: 4px;
    }
    .character-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }
    .character-wrapper img {
      width: 100px;
      height: auto;
    }
    .potions, .scrolls {
      display: flex;
      gap: 4px;
    }
    .potions img, .scrolls img {
      width: 28px;
      height: 28px;
    }
    .stats-panel {
      background: rgba(0,0,0,0.5);
      padding: 5px 8px;
      border: 1px solid #555;
      border-radius: 4px;
      font-size: 13px;
      line-height: 1.4;
      text-align: left;
      margin-top: 10px;
      max-height: 300px;
      overflow-y: auto;
    }
    .stats-panel p {
      margin: 4px 0;
    }
    .stats-panel hr {
      border: none;
      border-top: 1px solid #666;
      margin: 6px 0;
    }
    .middle {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .battle-area {
      background-color: rgba(0, 0, 0, 0.6);
      border: 1px solid #444;
      border-radius: 10px;
      padding: 15px;
      height: 240px;
      text-align: center;
      font-size: 18px;
    }
    .system-log {
      background-color: rgba(10, 10, 10, 0.7);
      border: 1px solid #222;
      border-radius: 10px;
      padding: 10px;
      font-size: 14px;
      overflow-y: auto;
      margin-top: 10px;
    }
    .right {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .block {
      background-color: rgba(0,0,0,0.5);
      padding: 8px;
      border: 1px solid #555;
      border-radius: 5px;
    }
      .lower-block {
      display: flex;
      gap: 10px;
      align-items: flex-start;
      margin-top: 10px;
    }
    #interface-wrapper {
      display: grid;
      grid-template-columns: 1fr 2fr 1fr;
      grid-template-rows: auto 1fr auto;
      gap: 10px;
      height: 100vh;
    }
</style>
</head>
<body>
<div id="interface-wrapper">
<section class="left player-interface" id="player">
<h1>[Ник]</h1>
<div class="hp-bar"><div class="hp-fill"></div></div>
<div class="main-layout">
<div class="left-panel" data-section="equipment" id="player-equipment">
<img alt="Серьги" src="Data/Images/img_item/e-09.gif"/>
<img alt="Ожерелье" src="Data/Images/img_item/e-10.gif"/>
<img alt="Оружие" src="Data/Images/img_item/e-11.gif"/>
<img alt="Броня" src="Data/Images/img_item/e-12.gif"/>
<div class="rings">
<img alt="Кольцо 1" src="Data/Images/img_item/e-13.gif"/>
<img alt="Кольцо 2" src="Data/Images/img_item/e-14.gif"/>
<img alt="Кольцо 3" src="Data/Images/img_item/e-15.gif"/>
</div>
</div>
<div class="character-wrapper" data-section="skin" id="player-skin">
<img alt="Скин" src="Data/Images/newobraz/m-001.gif"/>
<div class="potions">
<img src="Data/Images/img_item/e-02.gif"/>
<img src="Data/Images/img_item/e-03.gif"/>
<img src="Data/Images/img_item/e-04.gif"/>
</div>
<div class="scrolls">
<img src="Data/Images/img_item/e-06.gif"/>
<img src="Data/Images/img_item/e-07.gif"/>
<img src="Data/Images/img_item/e-08.gif"/>
</div>
</div>
<div class="lower-block">
<div class="right-panel" data-section="defense" id="player-defense">
<img alt="Шлем" src="Data/Images/img_item/e-16.gif"/>
<img alt="Щит" src="Data/Images/img_item/e-17.gif"/>
<img alt="Перчатки" src="Data/Images/img_item/e-18.gif"/>
<img alt="Ботинки" src="Data/Images/img_item/e-19.gif"/>
</div>
<div class="stats-panel" data-section="stats" id="player-stats">
<p><strong>🧬 Уровень:</strong></p>
<p><strong>🏆 Победы:</strong></p>
<p><strong>💀 Поражения:</strong></p>
<p><strong>⚖️ Ничьи:</strong></p>
<hr/>
<p><strong>💪 Сила:</strong></p>
<p><strong>🤸 Ловкость:</strong></p>
<p><strong>🧠 Интуиция:</strong></p>
<p><strong>❤️ Выносливость:</strong></p>
<hr/>
<p><strong>🛡️ Броня:</strong></p>
<hr/>
<p><strong>⚔️ Владение оружием:</strong></p>
<hr/>
<p><strong>🛠️ Специализация:</strong></p>
</div>
</div>
</div></section>
<section class="middle" id="arena" style="grid-column: 2;">
<div class="battle-area" data-section="arena" id="battle-area"></div>
<div class="system-log" data-section="log" id="battle-log"></div>
</section>
<aside class="right" id="side-panel" style="grid-column: 3; grid-row: 1 / span 2;">
<div class="block" data-section="map" id="map">
<strong>Карта:</strong>
</div>
<div class="block" data-section="players" id="location-users">
<strong>Игроки в локации:</strong>
</div>
<div class="block" data-section="chat" id="chat">
<strong>Чат:</strong>
<input placeholder="Введите сообщение..." type="text"/>
</div>
</aside>
</div>

<script>
window.addEventListener("DOMContentLoaded", function () {
  const tg = window.Telegram.WebApp;
  const initData = tg.initDataUnsafe;

  if (!initData || !initData.user) {
    console.log("Данные Telegram не найдены");
    return;
  }

  const userId = initData.user.id;
  const username = initData.user.username || initData.user.first_name;
  document.querySelector("h1").innerText = `[${username}]`;

  fetch("Player_Profile.json")
    .then(res => res.json())
    .then(data => {
      const player = data.find(p => p.telegram_id === userId);
      if (!player) return;

      const stats = player.stats;

      const statLines = document.querySelectorAll("#player-stats p");
      if (statLines.length > 0) statLines[0].innerHTML = `<strong>🧬 Уровень:</strong> ${stats.level}`;
      if (statLines.length > 1) statLines[1].innerHTML = `<strong>🏆 Победы:</strong> ${stats.wins}`;
      if (statLines.length > 2) statLines[2].innerHTML = `<strong>💀 Поражения:</strong> ${stats.losses}`;
      if (statLines.length > 3) statLines[3].innerHTML = `<strong>⚖️ Ничьи:</strong> ${stats.draws}`;
      if (statLines.length > 5) statLines[5].innerHTML = `<strong>💪 Сила:</strong> ${stats.strength}`;
      if (statLines.length > 6) statLines[6].innerHTML = `<strong>🤸 Ловкость:</strong> ${stats.agility}`;
      if (statLines.length > 7) statLines[7].innerHTML = `<strong>🧠 Интуиция:</strong> ${stats.intuition}`;
      if (statLines.length > 8) statLines[8].innerHTML = `<strong>❤️ Выносливость:</strong> ${stats.endurance}`;
      
      statLines.forEach(line => {
        if (line.innerHTML.includes("🛡️ Броня:")) {
          line.innerHTML = `<strong>🛡️ Броня:</strong><br />🪖 Головы: ${stats.armor.head}<br />👕 Тела: ${stats.armor.body}<br />🥾 Ног: ${stats.armor.legs}`;
        }
        if (line.innerHTML.includes("⚔️ Владение оружием:")) {
          line.innerHTML = `<strong>⚔️ Владение оружием:</strong><br />🗡️ Мечи: ${stats.weapon_skills.swords}%<br />🔨 Дубины и булавы: ${stats.weapon_skills.maces}%<br />🪓 Топоры: ${stats.weapon_skills.axes}%<br />🗡️ Кинжалы: ${stats.weapon_skills.daggers}%`;
        }
        if (line.innerHTML.includes("🛠️ Специализация:")) {
          line.innerHTML = `<strong>🛠️ Специализация:</strong><br />
          ⛏️ Рудокоп: ${stats.specializations.miner}%<br />
          🎣 Рыбак: ${stats.specializations.fisher}%<br />
          🪵 Плотник: ${stats.specializations.carpenter}%<br />
          ⚗️ Алхимик: ${stats.specializations.alchemist}%<br />
          🌾 Фермер: ${stats.specializations.farmer}%<br />
          🌲 Лесоруб: ${stats.specializations.lumberjack}%<br />
          🍳 Повар: ${stats.specializations.cook}%<br />
          💊 Лекарь: ${stats.specializations.healer}%`;
        }
      });
    });
});
</script>
</body>
</html>
